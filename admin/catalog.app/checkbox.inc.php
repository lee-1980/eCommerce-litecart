<?phpbreadcrumbs::add(language::translate('title_checkbox', 'Checkbox'));if(empty($_POST)){    $keylist = ['default_price_prices', 'guest_price_prices', 'wholesale_price_prices', 'insane_price_prices'];    foreach ($keylist as $key){        $settings_query = database::query(            "select * from " . DB_TABLE_SETTINGS . "          where `key` = '" . database::input($key) . "';"        );        if($setting = database::fetch($settings_query)){            $_POST['master'][$key] = $setting['value'];        }    }}if(isset($_POST['save'])) {    $_POST['master']['guest_price_prices'] = isset($_POST['master']['guest_price_prices']) ? 1 : 0;    $_POST['master']['default_price_prices'] = isset($_POST['master']['default_price_prices']) ? 1 : 0;    $_POST['master']['wholesale_price_prices'] = isset($_POST['master']['wholesale_price_prices']) ? 1 : 0;    $_POST['master']['insane_price_prices'] = isset($_POST['master']['insane_price_prices']) ? 1 : 0;    $_POST['master']['specialprice'] = isset($_POST['master']['specialprice']) ? 1 : 0;    $_POST['master']['customer_specialprice'] = isset($_POST['master']['customer_specialprice']) ? 1 : 0;     $_POST['master']['wholesale_specialprice'] = isset($_POST['master']['wholesale_specialprice']) ? 1 : 0;    $_POST['master']['sign_in_deal'] = isset($_POST['master']['sign_in_deal']) ? 1 : 0;    $_POST['master']['signin'] = isset($_POST['master']['signin']) ? 1 : 0;    $_POST['master']['sign_in'] = isset($_POST['master']['sign_in']) ? 1 : 0;    $_POST['master']['insaneprice'] = isset($_POST['master']['insaneprice']) ? 1 : 0;    try{        $products_query = database::query(            "select id, date_updated from ". DB_TABLE_PRODUCTS ."    where status    order by id;"        );        $updateQuery = "";        while ($product = database::fetch($products_query)) {            if($updateQuery != ''){                $updateQuery .= ",";            }            $updateQuery.= "(". $product['id'] .",             ".$_POST['master']['signin'].",             ".$_POST['master']['sign_in'].",             ".$_POST['master']['sign_in_deal'].",             ".$_POST['master']['default_price_prices'].",             ".$_POST['master']['guest_price_prices'].",            ".$_POST['master']['wholesale_price_prices'].",            ".$_POST['master']['insane_price_prices'].")";        }        database::query(            "insert into " . DB_TABLE_PRODUCTS . "            (id,             signin,             sign_in,             sign_in_deal,             master_customer_special_price,             master_guest_special_price,             master_wholesale_special_price,             master_insane_deal_price)            values ". $updateQuery ." on duplicate key update             signin = values(signin),            sign_in = values(sign_in),            sign_in_deal = values(sign_in_deal),             master_customer_special_price = values(master_customer_special_price),             master_guest_special_price = values(master_guest_special_price),             master_wholesale_special_price = values(master_wholesale_special_price),             master_insane_deal_price = values(master_insane_deal_price);"        );        foreach (array_keys($_POST['master']) as $key) {            $settings_query = database::query(                "select * from " . DB_TABLE_SETTINGS . "          where `key` = '" . database::input($key) . "';"            );            if (!$setting = database::fetch($settings_query)) {                database::query(                    "insert into " . DB_TABLE_SETTINGS . "            (`key`, `value`)            values ('" . $key . "', '" . $_POST['master'][$key] . "');"                );            } else {                database::query(                    "update " . DB_TABLE_SETTINGS . "          set            `value` = '" . database::input($_POST['master'][$key]) . "',            date_updated = '" . date('Y-m-d H:i:s') . "'          where `key` = '" . database::input($key) . "'          limit 1;"                );            }        }    }    catch (Exception $e){        throw new Exception(language::translate('Updating failed!'));    }}?><?php echo functions::form_draw_form_begin('switch_master', 'post', false, true); ?><div class="panel panel-app">    <div class="panel-heading">        <?php echo $app_icon; ?> Switches    </div>    <input type="hidden" name="master_price_setting" value="">      <h2><?php echo language::translate('title_master', 'Master'); ?></h2>        <div class="form-group">        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[signin]', '1', true); ?> <?php echo language::translate('title_signin', 'Signin'); ?></label>        </div>           </div>      <h2><?php echo language::translate('title_guest_price_prices', 'Guest Price Prices'); ?></h2>    <div class="form-group">        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[sign_in]', '1', true); ?> <?php echo language::translate('title_sign_in', 'Sign_in'); ?></label>        </div>               <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[guest_price_prices]', '1', true); ?> <?php echo language::translate('title_master_guest_special_price', 'Master Guest Special Price'); ?></label>        </div>    </div>      <h2><?php echo language::translate('title_default_price_prices', 'Default Price Prices'); ?></h2>    <div class="form-group">        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[default_price_prices]', '1', true); ?> <?php echo language::translate('title_master_customer_special_price', 'Master Customer Special Price'); ?></label>        </div>    </div>   <h2><?php echo language::translate('title_wholesale_price_prices', 'Wholesale Price Prices'); ?></h2>    <div class="form-group">        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[wholesale_price_prices]', '1', true); ?> <?php echo language::translate('title_master_wholesale_special_price', 'Master Wholesale Special Price'); ?></label>        </div>    <h2><?php echo language::translate('title_campaigns', 'Campaigns'); ?></h2>   <div class="form-group">        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[insane_price_prices]', '1', true); ?> <?php echo language::translate('title_master_insane_deal_price', 'Master Insane Deal Price'); ?></label>        </div>        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[sign_in_deal]', '1', true); ?> <?php echo language::translate('title_sign_in_deal', 'Sign In Deal'); ?></label>        </div>      </div><div class="panel-action btn-group">    <?php echo functions::form_draw_button('save', language::translate('title_save', 'Save'), 'submit', '', 'save'); ?></div><?php echo functions::form_draw_form_end(); ?><!--breadcrumbs::add(language::translate('title_switches', 'Switches'));if(empty($_POST)){    $keylist = ['default_price_prices', 'guest_price_prices', 'wholesale_price_prices', 'insane_price_prices'];    foreach ($keylist as $key){        $settings_query = database::query(            "select * from " . DB_TABLE_SETTINGS . "          where `key` = '" . database::input($key) . "';"        );        if($setting = database::fetch($settings_query)){            $_POST['master'][$key] = $setting['value'];        }    }}if(isset($_POST['save'])) {        $_POST['master']['guest_price_prices'] = isset($_POST['master']['guest_price_prices']) ? 1 : 0;    $_POST['master']['default_price_prices'] = isset($_POST['master']['default_price_prices']) ? 1 : 0;    $_POST['master']['wholesale_price_prices'] = isset($_POST['master']['wholesale_price_prices']) ? 1 : 0;    $_POST['master']['insane_price_prices'] = isset($_POST['master']['insane_price_prices']) ? 1 : 0;    $_POST['master']['specialprice'] = isset($_POST['master']['specialprice']) ? 1 : 0;    $_POST['master']['customer_specialprice'] = isset($_POST['master']['customer_specialprice']) ? 1 : 0;     $_POST['master']['wholesale_specialprice'] = isset($_POST['master']['wholesale_specialprice']) ? 1 : 0;        $_POST['master']['sign_in'] = isset($_POST['master']['sign_in']) ? 1 : 0;    $_POST['master']['sign_in_deal'] = isset($_POST['master']['sign_in_deal']) ? 1 : 0;    $_POST['master']['signin'] = isset($_POST['master']['signin']) ? 1 : 0;    $_POST['master']['insaneprice'] = isset($_POST['master']['insaneprice']) ? 1 : 0;    try{        $products_query = database::query(            "select id, date_updated from ". DB_TABLE_PRODUCTS ."    where status    order by id;"        );        $updateQuery = "";        while ($product = database::fetch($products_query)) {            if($updateQuery != ''){                $updateQuery .= ",";            }            $updateQuery.= "(". $product['id'] .",             ".$_POST['master']['signin'].",             ".$_POST['master']['sign_in'].",             ".$_POST['master']['sign_in_deal'].",             ".$_POST['master']['insaneprice'].",                        ".$_POST['master']['wholesale_specialprice'].",             ".$_POST['master']['customer_specialprice'].",              ".$_POST['master']['specialprice'].",              ".$_POST['master']['default_price_prices'].",             ".$_POST['master']['guest_price_prices'].",            ".$_POST['master']['wholesale_price_prices'].",            ".$_POST['master']['insane_price_prices'].")";        }        database::query(            "insert into " . DB_TABLE_PRODUCTS . "            (id,             sign_in,            signin,             sign_in_deal,             insaneprice,                          wholesale_specialprice,             customer_specialprice,              specialprice,                         master_customer_special_price,             master_guest_special_price,             master_wholesale_special_price,             master_insane_deal_price)                        values ". $updateQuery ." on duplicate key update                         sign_in = values(sign_in),             signin = values(signin),             sign_in_deal = values(sign_in_deal),             insaneprice = values(insaneprice),                        wholesale_specialprice = values(wholesale_specialprice),             customer_specialprice = values(customer_specialprice),             specialprice = values(specialprice),                         master_customer_special_price = values(master_customer_special_price),             master_guest_special_price = values(master_guest_special_price),             master_wholesale_special_price = values(master_wholesale_special_price),             master_insane_deal_price = values(master_insane_deal_price);"        );        foreach (array_keys($_POST['master']) as $key) {            $settings_query = database::query(                "select * from " . DB_TABLE_SETTINGS . "          where `key` = '" . database::input($key) . "';"            );            if (!$setting = database::fetch($settings_query)) {                database::query(                    "insert into " . DB_TABLE_SETTINGS . "            (`key`, `value`)            values ('" . $key . "', '" . $_POST['master'][$key] . "');"                );            } else {                database::query(                    "update " . DB_TABLE_SETTINGS . "          set            `value` = '" . database::input($_POST['master'][$key]) . "',            date_updated = '" . date('Y-m-d H:i:s') . "'          where `key` = '" . database::input($key) . "'          limit 1;"                );            }        }    }    catch (Exception $e){        throw new Exception(language::translate('Updating failed!'));    }}?><?php echo functions::form_draw_form_begin('switch_master', 'post', false, true); ?><div class="panel panel-app">    <div class="panel-heading">        <?php echo $app_icon; ?> Switches    </div>    <input type="hidden" name="master_price_setting" value="">  <h2><?php echo language::translate('title_guest_price_prices', 'Guest Price Prices'); ?></h2>      <div class="form-group">        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[signin]', '1', true); ?> <?php echo language::translate('title_signin', 'Sign In'); ?></label>        </div>                 <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[specialprice]', '1', true); ?> <?php echo language::translate('title_specialprice', 'Guest Special Price'); ?></label>        </div>                <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[guest_price_prices]', '1', true); ?> <?php echo language::translate('title_master_guest_special_price', 'Master Guest Special Price'); ?></label>        </div>    </div>      <h2><?php echo language::translate('title_default_price_prices', 'Default Price Prices'); ?></h2>      <div class="form-group">        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[customer_specialprice]', '1', true); ?> <?php echo language::translate('title_customer_specialprice', 'Customer Special Price'); ?></label>        </div>            <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[default_price_prices]', '1', true); ?> <?php echo language::translate('title_master_customer_special_price', 'Master Customer Special Price'); ?></label>        </div>    </div>   <h2><?php echo language::translate('title_wholesale_price_prices', 'Wholesale Price Prices'); ?></h2>    <div class="form-group">        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[wholesale_specialprice]', '1', true); ?> <?php echo language::translate('title_wholesale_special_price', 'Wholesale Special Price'); ?></label>        </div>        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[wholesale_price_prices]', '1', true); ?> <?php echo language::translate('title_master_wholesale_special_price', 'Master Wholesale Special Price'); ?></label>        </div>    <h2><?php echo language::translate('title_campaigns', 'Campaigns'); ?></h2>    <div class="form-group">                 <div class="checkbox" style="display: none;">            <label><?php echo functions::form_draw_checkbox('master[sign_in]', '1', true); ?> <?php echo language::translate('title_sign_in', 'Sign In'); ?></label>        </div>                         <div class="checkbox" style="display: none;">            <label><?php echo functions::form_draw_checkbox('master[insaneprice]', '1', true); ?> <?php echo language::translate('title_insaneprice', 'Insane Price'); ?></label>        </div>                 <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[insane_price_prices]', '1', true); ?> <?php echo language::translate('title_master_insane_deal_price', 'Master Insane Deal Price'); ?></label>        </div>        <div class="checkbox">            <label><?php echo functions::form_draw_checkbox('master[sign_in_deal]', '1', true); ?> <?php echo language::translate('title_sign_in_deal', 'Sign In Deal'); ?></label>        </div>      </div><div class="panel-action btn-group">    <?php echo functions::form_draw_button('save', language::translate('title_save', 'Save'), 'submit', '', 'save'); ?></div><?php echo functions::form_draw_form_end(); ?>